
there are 2 threads in rts .


    threads:
        1. websocket server (tornado ioloop thread)        
            read client msg
                dispatch msg
                    create user agent
                        create user agent part
                    remove user agent
                        <lock>
                        remove user agent part
                        <unlock>
        2. rts service msg loop thread (main)
            read service msg from mq
                dipatch service msg
                    <lock>
                    get user agent
                        push user agent message to client
                    <unlock>
    risk:
        1. websocket server remove useragent need lock guard
        2. rts services proc msg need apply useragent lock


